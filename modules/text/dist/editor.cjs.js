"use strict";Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"});const f=require("./hydrator.cjs.js"),h=require("./renderer.cjs.js"),p=async()=>({f:{name:e=>`${e.name}${e.id}`}}),g=()=>({set:()=>"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){const r=Math.random()*16|0;return(e=="x"?r:r&3|8).toString(16)})}),l=async e=>{const r=await p();return{set:async s=>{const i={r:""},d=s.data.curr||{id:g().set(),type:"text",data:{data:""}},o=e.f.new_emitter(),m=await h.index({f:{...e.f,name:n=>r.f.name({id:d.id,name:n})}}),u=await f.index({my:{},f:{...e.f,name:n=>r.f.name({id:d.id,name:n}),call:o.emit}}),x=await m.set({data:{curr:d}});return setTimeout(async()=>{(async()=>o.on("msg",async t=>{if(t.type=="add"){let a=t,c=a.el;c?.setAttribute("contenteditable","true"),c?.classList.add("block-content"),c?.addEventListener("click",()=>{}),c?.addEventListener("input",function(_){const y=c.innerHTML;a.$d.data=y,n.evt.change()})}t.type=="change"&&e.f.call("msg",{type:"change",_p:e,_$p:t._$p,custom:{}})}))();const n=await u.set({data:{curr:d}});(t=>{const a=document.createElement("style");a.innerHTML=`${n.style}`,t.appendChild(a)})(document.head)},200),i.r=x.r,(n=>{const t=document.createElement("style");t.innerHTML=`${x.style}`,n.appendChild(t)})(document.head),i}}};exports.editor=l;exports.index=l;
