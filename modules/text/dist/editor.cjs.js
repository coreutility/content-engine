"use strict";Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"});const h=require("./hydrator.cjs.js"),p=require("./renderer.cjs.js"),g=async()=>({f:{name:e=>`${e.name}${e.id}`}}),_=()=>({set:()=>"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){const r=Math.random()*16|0;return(e=="x"?r:r&3|8).toString(16)})}),u=async e=>{const r=await g();return{set:async s=>{const i={r:""},d=s.data.curr||{id:_().set(),type:"text",data:{data:""}},o=e.f.new_emitter(),y=await p.index({f:{...e.f,name:n=>r.f.name({id:d.id,name:n})}}),f=await h.index({my:{},f:{...e.f,name:n=>r.f.name({id:d.id,name:n}),call:o.emit}}),x=await y.set({data:{curr:d}});return setTimeout(async()=>{const n=await f.set({data:{curr:d}});(async()=>o.on("msg",async t=>{if(t.type=="add"){let a=t,c=a.el;c?.setAttribute("contenteditable","true"),c?.classList.add("block-content"),c?.addEventListener("click",()=>{});const l=()=>{const m=c.innerHTML;a.$d.data=m,n.evt.change()};c?.addEventListener("input",function(m){l()}),l()}t.type=="change"&&e.f.call("msg",{type:"change",_p:e,_$p:t._$p,custom:{}})}))(),(t=>{const a=document.createElement("style");a.innerHTML=`${n.style}`,t.appendChild(a)})(document.head)},200),i.r=x.r,(n=>{const t=document.createElement("style");t.innerHTML=`${x.style}`,n.appendChild(t)})(document.head),i}}};exports.editor=u;exports.index=u;
